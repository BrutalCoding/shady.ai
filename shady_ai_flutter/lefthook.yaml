# EXAMPLE USAGE:
#
#   Refer for explanation to following link:
#   https://github.com/evilmartians/lefthook/blob/master/docs/configuration.md
#
pre-push:
  parallel: true
  commands:
    test:
      run: flutter test --no-sound-null-safety
    analyze:
      # Any issues type of INFO will be accepted, all others such as errors/warnings will not
      run: |
        flutter analyze --no-fatal-infos
        flutter pub run dart_code_metrics:metrics analyze lib
    unused:
      # Checks unused code in *.dart files
      run: |
        flutter pub run dart_code_metrics:metrics check-unused-files lib --exclude="{/**.g.dart,/**.freezed.dart,**.gen.dart}"
        flutter pub run dart_code_metrics:metrics check-unused-code lib --exclude="{/**.g.dart,/**.freezed.dart,**.gen.dart}"

commit-msg:
  scripts:
    "conventional_commit.sh": # Conventional Commits (https://www.conventionalcommits.org/en/v1.0.0/)
      runner: bash

pre-commit:
  commands:
    dart-format:
      glob: '*.dart'
      run: dart format "{staged_files}" && git add "{staged_files}"
